machine:
  ruby:
    version: 2.3.1

dependencies:
  override:
    - gem install jekyll
    - jekyll --version

test:
  override:
    - echo 'skip'

deployment:
  automerge:
    branch: develop
    commands:
      - jekyll build
      - git checkout master
      - git merge develop
      - git push

  autopublish:
    branch: master
    commands:
      - jekyll build
      - mv cirlce.yml .git/ _site/
      - cd _site; git checkout --orphan gh-pages
      - cd _site; git add -A
      - cd _site; git commit -m "Publish gh-pages"
      - cd _site; git push --force
